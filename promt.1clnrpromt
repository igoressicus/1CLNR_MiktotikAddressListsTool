Привет. Нужно написать программу на python, которая проанализирует заданную папку
и пройдет по всем ее подпапка. В подпапках находятся файлы в формате bat, которые 
содержат в себе записи "route add 192.168.10.0 mask 255.255.255.0 0.0.0.0". Их нужно 
трансформировать в запись типа "add address=192.168.10.0/24 list=%fordername%"
где %foldername% это имя папки, в которой лежал bat файл. %foldername% будет
названием списка ip адресов для микротика. В рамках каждого списка после преобразования
нужно будет провести оптизизацию ip адресов. 
В процессе оптимизации нужно убрать подсети, которые входят в другие подсети
в рамках одного списка, например 192.168.0.2/32 входит в подсеть 192.168.0.0/24,
значит нужно оставить 192.168.0.0/24.
Также для оптизизации и уменьшения количества записей нужно все соседствующие
между собой подсети, по типу 192.168.0.0/24 и 192.168.1.0/24 объединить в 
подсеть 192.168.0.0/23. Оптимизацию нужно производить в рамках одного списка.
Также в исследуемых папках существуют файлы, имена которых заканчиваются на _domain
В этих файлах построчно перечислены домены, из них нужно убрать все протоколы по типу
https://youtu.be. Например, имя папки было "youtube".
Должно получиться 2 записи на домен, youtu.be и www.youtu.be
Эти записи нужно добавить в результирующий файл списка в виде
"add address=youtu.be list=youtube
add address=www.youtu.be list=youtube"
В результирующем файле списки быть отсортированы по имени

Итоговый файл должен получиться вот таким и иметь наименование "out.lists.rsc"
"/ip firewall address-list
add address=213.155.157.0/24 list=adobe
add address=192.147.130.16/32 list=adobe
add address=64.89.224.0/20 list=akamai
add address=199.119.220.0/22 list=akamai
add address=63.208.195.0/24 list=akamai
add address=80.67.65.0/24 list=akamai
add address=80.67.70.0/24 list=akamai
add address=80.67.73.0/24 list=akamai
add address=47.236.0.0/14 list=aliexpress
add address=47.240.0.0/14 list=aliexpress"
Первая строка должна начинаться c "/ip firewall address-list"

Также нужно сделать второй файл с наименованием "out.mangle.rsc",
который будет начинаться со строки 
"/ip firewall mangle"
Следущими строками будут строки
"add action=mark-routing chain=prerouting dst-address-list=%listname% new-routing-mark=%markname% passthrough=no"

Также программа может получить параметр -merge с путем к файлу, в котором уже существуют
списки в формате
"add address=162.159.130.233 comment=discord list=discord"
комментарии должны быть проигнорированы, а id адреса должны быть оптимизированы, объединены
по подсетям по возможности в рамках названия списка и добавлены в результирующие файлы
таким же образом, как будут добавлены записи из папок

Третий файл out.log должен содержать подробный лог выполнения программы

Программа должна получить %markname%, путь к исследуемой папке, путь, куда будут сохранены 
out файлы параметрами при запуске или спрашивать их в процессе в виде диалога.
При запуске без параметров программа должна вывести справку и начать спрашивать необходимые данные 
для работы.

Конечные команды микротика должны быть очищены от пробелов и неподдерживаемых символов, чтобы не вызвать
ошибку при выполнении